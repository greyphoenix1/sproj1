{"ast":null,"code":"import React,{useEffect,useRef,useState}from'react';import io from'socket.io-client';import TopBar from'./TopBar';import{Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const socket=io('http://localhost:3000');function ImageTranfer(){const fileInputRef=useRef();const[status,setStatus]=useState('Connecting...');const[devices,setDevices]=useState([]);const[images,setImages]=useState([]);useEffect(()=>{socket.on('status',msg=>{setStatus(msg);});socket.on(\"devicesFound\",foundDevices=>{setDevices(foundDevices);setStatus('Select a device to connect');});socket.on('receiveImage',data=>{console.log('received image data',data);//const img = document.createElement('img');\nconst imgURL=URL.createObjectURL(new Blob([data]));setImages(prevImages=>[...prevImages,imgURL]);//document.body.appendChild(img);\n});},[]);const handleSendImage=()=>{const file=fileInputRef.current.files[0];if(file){const reader=new FileReader();reader.onload=e=>{const buffer=e.target.result;console.log('Image buffer',buffer);socket.emit('sendImage',buffer);};reader.readAsArrayBuffer(file);}else{console.log('no files selected');}};const handleConnectToDevice=device=>{socket.emit('connectToDevice',device);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"head\",{children:/*#__PURE__*/_jsx(\"link\",{rel:\"stylesheet\",href:\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,700,0,0\"})}),/*#__PURE__*/_jsx(TopBar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"background\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"back\",children:/*#__PURE__*/_jsx(Link,{to:\"/homepage\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",height:\"48px\",viewBox:\"0 -960 960 960\",width:\"48px\",fill:\"#000000\",children:/*#__PURE__*/_jsx(\"path\",{d:\"m297.18-440.39 238.95 238.96L480-145.87 145.87-480 480-814.7l56.13 56.13-238.95 238.96H814.7v79.22H297.18Z\"})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"status-container\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Status: \",status]}),devices.length>0&&/*#__PURE__*/_jsx(\"ul\",{children:devices.map((device,index)=>/*#__PURE__*/_jsx(\"li\",{onClick:()=>handleConnectToDevice(device),children:device},index))})]}),/*#__PURE__*/_jsx(\"input\",{className:\"upload\",type:\"file\",ref:fileInputRef}),/*#__PURE__*/_jsx(\"button\",{className:\"send\",onClick:handleSendImage,children:\"Send Image\"}),/*#__PURE__*/_jsx(\"div\",{className:\"image-display\",children:images.map((imgSrc,index)=>/*#__PURE__*/_jsx(\"img\",{src:imgSrc,alt:`Received Image ${index}`},index))})]})]});}export default ImageTranfer;","map":{"version":3,"names":["React","useEffect","useRef","useState","io","TopBar","Link","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","socket","ImageTranfer","fileInputRef","status","setStatus","devices","setDevices","images","setImages","on","msg","foundDevices","data","console","log","imgURL","URL","createObjectURL","Blob","prevImages","handleSendImage","file","current","files","reader","FileReader","onload","e","buffer","target","result","emit","readAsArrayBuffer","handleConnectToDevice","device","children","rel","href","className","to","xmlns","height","viewBox","width","fill","d","length","map","index","onClick","type","ref","imgSrc","src","alt"],"sources":["C:/Users/rahma/Desktop/Projects/sProj1/sproj1/frontend/src/ImageTransfer.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport io from 'socket.io-client';\r\nimport TopBar from './TopBar'\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst socket = io('http://localhost:3000');\r\n\r\nfunction ImageTranfer() {\r\n    const fileInputRef = useRef();\r\n    const [status, setStatus] = useState('Connecting...');\r\n    const [devices, setDevices] = useState([]);\r\n    const [images, setImages] = useState([]);\r\n\r\n    useEffect(() => {\r\n        socket.on('status', (msg) => {\r\n            setStatus(msg);\r\n        });\r\n\r\n        socket.on(\"devicesFound\", (foundDevices) => {\r\n            setDevices(foundDevices);\r\n            setStatus('Select a device to connect');\r\n        })\r\n\r\n        socket.on('receiveImage', (data) => {\r\n            console.log('received image data', data);\r\n            \r\n            //const img = document.createElement('img');\r\n            const imgURL = URL.createObjectURL(new Blob([data]));\r\n            setImages((prevImages) => [...prevImages, imgURL]);\r\n            //document.body.appendChild(img);\r\n        });\r\n    }, []);\r\n\r\n    const handleSendImage = () => {\r\n        const file = fileInputRef.current.files[0];\r\n        if (file) {\r\n            const reader = new FileReader();\r\n            reader.onload = (e) => {\r\n                const buffer = e.target.result;\r\n                console.log('Image buffer',buffer);\r\n                socket.emit('sendImage', buffer);\r\n            };\r\n            reader.readAsArrayBuffer(file);\r\n        } else {\r\n            console.log('no files selected');\r\n            \r\n        }\r\n    }\r\n\r\n    const handleConnectToDevice = (device) => {\r\n        socket.emit('connectToDevice', device);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <head>\r\n                <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,700,0,0\" />\r\n\r\n            </head>\r\n\r\n            <TopBar />\r\n            <div className='background'>\r\n                <div className=\"back\">\r\n                    <Link to=\"/homepage\">\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"48px\" viewBox=\"0 -960 960 960\" width=\"48px\" fill=\"#000000\"><path d=\"m297.18-440.39 238.95 238.96L480-145.87 145.87-480 480-814.7l56.13 56.13-238.95 238.96H814.7v79.22H297.18Z\" /></svg>\r\n                    </Link>\r\n                </div>\r\n\r\n                <div className='status-container'>\r\n                    <p>Status: {status}</p>\r\n                    {devices.length > 0 && (\r\n                        <ul>\r\n                            {devices.map((device, index) => (\r\n                                <li key={index} onClick={() => handleConnectToDevice(device)}>\r\n                                    {device}\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                    )}\r\n                </div>\r\n\r\n                <input className='upload' type=\"file\" ref={fileInputRef} />\r\n                <button className='send' onClick={handleSendImage}>Send Image</button>\r\n\r\n                <div className='image-display'>\r\n                    {images.map((imgSrc, index) => (\r\n                        <img key={index} src={imgSrc} alt={`Received Image ${index}`} />\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n\r\n}\r\n\r\nexport default ImageTranfer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}